<!DOCTYPE html>
<html>
<head>
  <title>Arcane Calculator</title>
  <style>
    body {
      margin: 0;
      font-family: Arial;
      background: #1e1e1e;
      color: white;
    }

    .container {
      display: flex;
      height: 100vh;
    }

    /* LEFT PANEL */
    .sidebar {
      width: 250px;
      background: #2a2a2a;
      padding: 15px;
      box-sizing: border-box;
      border-right: 2px solid #444;
    }

    .map-btn:hover {
      background: #4da6ff;
      box-shadow: 0 0 10px #4da6ff;
    }

    .map-btn:hover {
      background: #4da6ff;
    }

    /* RIGHT PANEL */
    .content {
      flex: 1;
      padding: 20px;
    }

    .card {
      background: url("bg.png") no-repeat center;
      background-size: cover;
      padding: 20px;
      border-radius: 8px;
      backdrop-filter: blur(3px);
      background-color: rgba(0,0,0,0.6);
    }

    .title {
      color: #ffd700;
      text-shadow: 0 0 8px #ffcc00;
    }


    .info {
      margin-bottom: 10px;
    }
  </style>
</head>

<body>

<div class="container">

  <!-- LEFT SIDE -->
  <div class="sidebar">
    <h3>Arcane Maps</h3>

    <div class="map-btn" onclick="loadMap('alley')">
      Lachelein Alley
    </div>

    <div class="map-btn" onclick="loadMap('street')">
      Lachelein Street
    </div>

    <div class="map-btn" onclick="loadMap('clocktower')">
      Lachelein Clocktower
    </div>
  </div>

  <!-- RIGHT SIDE -->
  <div class="content">
    <div class="card">
      <div class="title" id="mapTitle">
        Select a Map
      </div>

      <div class="info" id="mapInfo"></div>
      <div class="info" id="cycleInfo"></div>
      <div class="info" id="timeLeft"></div>
    </div>
  </div>

</div>

<script>
/* ===========================
   MAP DATA CONFIG
=========================== */

const maps = {
  alley: {
    name: "Lachelein Alley",
    startAmount: 0.6776,
    finalTarget: 1.0,
    rechargeMinutes: 30,
    startTime: new Date("2026-02-17T17:40:00").getTime()
  },

  street: {
    name: "Lachelein Street",
    startAmount: 0.5000,
    finalTarget: 1.2,
    rechargeMinutes: 20,
    startTime: new Date("2026-02-17T17:40:00").getTime()
  },

  clocktower: {
    name: "Lachelein Clocktower",
    startAmount: 0.3000,
    finalTarget: 0.9,
    rechargeMinutes: 15,
    startTime: new Date("2026-02-17T17:40:00").getTime()
  }
};

let currentMap = null;

/* ===========================
   LOAD MAP
=========================== */

function loadMap(key) {
  currentMap = maps[key];
  document.getElementById("mapTitle").innerText = currentMap.name;
  updateCalculator();
}

/* ===========================
   CALCULATOR
=========================== */

function updateCalculator() {
  if (!currentMap) return;

  const now = new Date().getTime();
  const elapsed = now - currentMap.startTime;

  const cycleMs = currentMap.rechargeMinutes * 60 * 1000;
  const cyclesPassed = Math.floor(elapsed / cycleMs);

  const gained = cyclesPassed * 0.036; // example per cycle
  const currentAmount = Math.min(
    currentMap.startAmount + gained,
    currentMap.finalTarget
  );

  const nextCycleTime =
    currentMap.startTime + (cyclesPassed + 1) * cycleMs;

  const timeRemaining = nextCycleTime - now;

  document.getElementById("mapInfo").innerText =
    "Current Amount: " + currentAmount.toFixed(4);

  document.getElementById("cycleInfo").innerText =
    "Cycles Passed: " + cyclesPassed;

  if (timeRemaining > 0) {
    const h = Math.floor(timeRemaining / (1000 * 60 * 60));
    const m = Math.floor((timeRemaining / (1000 * 60)) % 60);
    const s = Math.floor((timeRemaining / 1000) % 60);

    document.getElementById("timeLeft").innerText =
      "Time Until Next Recharge: " +
      h + "h " + m + "m " + s + "s";
  } else {
    document.getElementById("timeLeft").innerText =
      "Fully Recharged";
  }
}

setInterval(updateCalculator, 1000);
</script>

</body>
</html>

